# 程序是怎么跑起来的

程序是由指令和数据组成的

机器语言是指CPU可以直接识别并使用的语言

正在运行的程序存储在内存中

在计算机的构成元件中，CPU负责程序的解释和运行

## CPU（central processing unit 中央处理器）

CPU和内存是由许多晶体管组成的电子部件，通常称为IC（integrated circuit 集成电路）

从功能看，CPU的内部由寄存器、控制器、运算器和时钟四个部分构成

寄存器用来暂存指令、数据等处理对象，可看作内存的一种

控制器把内存上的指令、数据等读入寄存器，并根据指令的执行结果来控制整个计算机

运算器负责运算从内存读入寄存器的数据

常说的内存指的是计算机的主存，常使用DRAM芯片，主存通过控制芯片与CPU相连，主要负责存储指令和数据，其存储内容会随着计算机的关机而自动清除

## 程序流程

程序计数器决定着程序的流程

- 顺序执行：每执行一个指令程序，程序计数器的值就自动加一

- 条件分支：机器语言的指令将程序计数器的值设定为任意地址，使得程序可以跳转到任意地址【跳转指令】

- 循环：机器语言的指令将程序计数器的值设定为任意地址，使得程序可以返回上一地址来重复执行同一个指令【跳转指令】

- 函数调用：【call指令】&【return指令】

  ![image-20220926103315559](C:\Users\Monica\AppData\Roaming\Typora\typora-user-images\image-20220926103315559.png)

函数调用的处理转换成call指令，把调用函数后要执行的指令地址存储在名为栈的主存中；函数结束的处理则会转换成return指令，把保存在栈中的地址设定到程序计数器中

![image-20220926103638357](C:\Users\Monica\AppData\Roaming\Typora\typora-user-images\image-20220926103638357.png)

![image-20220926103630820](C:\Users\Monica\AppData\Roaming\Typora\typora-user-images\image-20220926103630820.png)

## 数据的表示——二进制

8位二进制称为一个字节

位是最小单位，字节是基本单位
$$
3*2^3+5*2^2+1*2^1+7*2^0
$$
**位权:**如上，各个和基数2的次幂相乘的系数即为位权

**基数**:如上，2即为基数（十进制数是以10为基数的基数方法，二进制数是以2为基数的计数方法）

### 补码（便于计算机处理）——数位取反加1，符号位不变

二进制数中表示负数值时，一般把最高位作为符号来使用，也就是符号位

**符号位是0时表示正数，符号位是1时表示负数**

补码就是用正数表示负数
$$
-1:11111111
$$
补码可以直接进行负数的加运算，对于溢出的位，计算机直接忽略
$$
1+(-1)=00000001+11111111=1000000000(第九位溢出)=00000000=0
$$

- 由补数的机制知有符号数的负数比正数多一个的原因：

  负数范围：$[-2^7,0)$

  正数范围:$[0,2^7-1]$

  其实若把0看作是正数（符号位为0），则正数和负数的个数相同，均为$2^7$

### 移位运算

**左移：**在空出来的低位补0

**右移：**

- 逻辑右移：二进制数值表示图形模式，则移位后在最高位补0

- 算术右移：二进制数作为**带符号**的数值进行运算值，移位后要在**最高位填充移位前符号位的值**，

  **如**-4（11111100）右移两位，

  逻辑右移结果：63（00111111）

  算术右移结果：-1（11111111）

### 符号扩充

如将8进制数在保持值不变的前提下将其转换成16为的二进制数

01111111->0000000001111111

11111111->1111111111111111

**->用符号位的值填充高位即可**



## 内存

内存实际上是一种名为内存IC的电子元件，包括DRAM、SRAM、ROM等多种形式

- ROM(Read Only Memory):只能用来读取的内存
- RAM(Random Access Memory)：可被读取和写入的内存
  - DRAM(Dynamic RAM):需要经常刷新以保存数据
  - SRAM(Static RAM):不需要刷新电路即能保存数据

从外部来看，内存IC有电源、地址信号、数据信号、控制信号等用于输入输出的大量引脚，通过为其指定地址，来进行数据的读写

![image-20220926110615671](C:\Users\Monica\AppData\Roaming\Typora\typora-user-images\image-20220926110615671.png)

如图：数据信号有八个引脚，即一次可以输入输出1字节的数据，地址信号有是个，可以指定1024个地址，而地址用来表示数据的存储场所，可知内存IC中可以存储1024个1字节的数据（1024=1K）,即内存IC的容量为1KB

通常情况下，计算机使用的内存IC中会有更多的地址信号引脚，这也就能在一个内存IC中存储数十兆字节的数据

![image-20220926111107553](C:\Users\Monica\AppData\Roaming\Typora\typora-user-images\image-20220926111107553.png)